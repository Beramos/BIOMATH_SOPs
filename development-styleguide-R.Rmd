---
title: "INBO style guide for R code"
maintainer: "Thierry Onkelinx"
output: html_document
---

# Scope

This style guide applies to all R code where INBO is copyright holder. It is mandatory for all new projects intended to be distributed and highly recommended for all other projects. It doesn't apply to existing projects, except when revising those project. Then the style guide applies to the revised parts of the code.

# Recommended packages

## Data import

`readr`
  ~ text files

`readexcel`
  ~ Excel files
  
`googlesheets`
  ~ googlesheets

`DBI`
  ~ connections to databases: PostgreSQL, SQLite, MySQL, Oracle, ...
  
`RODBC`
  ~ connections to SQL Server, Access

## Data manipulation and transformation

`dplyr`
  ~ subsetting observations
  ~ subsetting variables
  ~ changing variables
  ~ aggregation
  ~ combining dataframes

`tidyr`
  ~ changing a dataframe for wide to long format and vice versa
  ~ nesting and unnesting dataframes
  ~ splitting a single variable into multiple variables

## Graphics

`ggplot2`
  ~ all static graphics

`INBOtheme`
  ~ INBO corporate identity for `ggplot2` graphics

## Quality control

`lintr`
  ~ checking coding style

`testthat`
  ~ writing unit tests

`covr`
  ~ check which part of the code is not covered by unit tests

# Syntax

- lines should not exceed 80 characters
- object names should not exceed 30 characters
- object names should lowercase
- use `_` to separate words in object names

## Assignments

- always use `<-` for assignment
- use `=` only for passing arguments in a function
- only create an object when you will use it later on
- one space before and one space after `<-` and `=`

```{r eval = FALSE}
# Good
x <- data.frame(z = 1:10)
summary(x)

# Wrong
x=data.frame(z<-1:10)
```

## Brackets

R uses three types of brackets: round `(`, `)`, square `[`, `]` and curly `{`, `}`.

- no spaces after opening a bracket
- no spaces before closing a bracket
- no spaces before opening a bracket except:
    - one space with control flow functions (`if`, `else`, `for`, `while`)
- no spaces after closing a bracket except:
    - one space with control flow functions (`if`, `else`, `for`, `while`)
- apply identation when splitting long text inside brackets over multiple lines
```{r eval = FALSE}
# Good
y <- seq(0, 2)
if (max(y) <= 10) {
  x <- 1
} else {
  x <- 2
}
sapply(
  y, 
  function(x){
    return(x)
  }
)

# Wrong
y <- seq (0, 2   )
if(   max( y ) <= 10    )        { x <- 1 } else 
{ x <- 2 }
```

# Documentation

## Functions

- Add documentation above each function with `Roxygen` markup
- Add inline comments where relevant

## How-to's

- Add one or more how-to's to a package
- Add them as RMarkdown vignettes
